---
/**
 * NowItemRenderer Component
 * Renders a now entry with proper markdown processing
 */

interface Props {
  entry: any;
}

const { entry } = Astro.props;
const { Content } = await entry.render();

// Get all headings from the markdown content
const headingMatches = entry.body.matchAll(/##\s+(.+)/g);
const headings = Array.from(headingMatches, match => match[1]);
const previewText = headings.length > 0 ? headings.join(', ') : 'Current thoughts and updates';
---

<div
  class="now-item"
  data-href="/now"
  role="button"
  tabIndex="0"
  aria-label="Read current thoughts and updates"
>
  <div class="entry-meta">
    <time datetime={entry.data.date.toISOString()}>
      {new Date(entry.data.date).toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' })}
    </time>
    <span class="entry-type">Now</span>
  </div>
  <div class="now-item-content">
    <p class="now-preview">{previewText}</p>
  </div>
</div>